
# 医疗规则引擎设计

## 相关业务

### 业务项

> 患者信息
> 诊断信息
> 医嘱信息

> 药品信息
> 诊疗项目信息
> 耗材信息

> 病种信息

### 业务场景

1、事前：患者入院，医生给患者开诊断后，会进行药品（诊疗项目、耗材）的操作，在此时，his 系统需要给大夫进行合理性用药的提示信息。通过金护卫系统，对大夫的操作进行分析，判断是否合理使用，并给出提示。

2、事中：在金护卫系统对 his 的数据对前一天进行抓取，将病人的所有数据进行整合，去和事中的规则去匹配，输出不符合规则的数据。

3、结算：在结算前，需要对病人的相关明细进行审核，核算该病人是单病种结算还是正常结算。需要给院方提出建议。

## 业务项关系

### 药品相关业务项关系

1、药品与诊断

> 需要参数：药品code，诊断code

2、药品与计量

> 需要参数：药品code，药品计量

3、药品与药品比例（药品诊断对比例有要求）

> 需要参数：药品code，药品code

4、药品与医嘱

> 需要参数：药品code，医嘱code

5、药品与性别

> 需要参数：药品code，性别code

6、药品与年龄

> 需要参数：药品code，年龄

7、药品与住院天数

> 需要参数：药品code，住院天数

### 诊疗项目相关业务项关系

1、诊疗项目与年龄

> 需要参数：诊疗项目code，年龄

2、诊疗项目与性别

> 需要参数：诊疗项目code，性别code

3、诊疗项目与诊断

> 需要参数：诊疗项目code，诊断code

4、诊疗项目与医嘱

> 需要参数：诊疗项目code，医嘱code

5、诊疗项目与诊疗项目

> 需要参数：诊疗项目code，诊疗项目code

6、诊疗项目与住院天数

> 需要参数：诊疗项目code，住院天数


## 规则需求完计划

|  业务项关系  | domain | 规则 | 完成情况 | 
|  ----  | ----  | ----| ----|
| 药品_诊断  | ExternalMedicalRule | 规则反向枚举  | √ |
| 药品_药品_比例  | DrugProportionMedicalRule | 规则枚举  |  |
| 药品_医嘱  | ExternalMedicalRule | 规则反向枚举  | |
| 药品_计量  | DrugMeasureMedicalRule | 规则枚举  | |
| 药品_性别  | GenderMedicalRule | 规则枚举  | √ |
| 药品_时长  | DurationMedicalRule | 规则枚举  |  |
| 药品_年龄  | AgeMedicalRule | 规则枚举  | √ |
| 诊疗项目_诊断  | ExternalMedicalRule | 规则反向枚举  | |
| 诊疗项目_医嘱  | ExternalMedicalRule | 规则反向枚举  | |
| 诊疗项目_诊疗项目  | MedicalProjectMedicalRule | 规则枚举  | √ |
| 诊疗项目_时长  | DurationMedicalRule | 规则反向枚举  | |
| 诊疗项目_年龄  | AgeMedicalRule | 规则枚举  | √ |
| 诊疗项目_性别  | GenderMedicalRule | 规则枚举  | √ |